(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e71876de"],{"11e9":function(t,e,n){var r=n("52a7"),i=n("4630"),a=n("6821"),s=n("6a99"),c=n("69a8"),o=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=a(t),e=s(e,!0),o)try{return u(t,e)}catch(n){}if(c(t,e))return i(!r.f.call(t,e),t[e])}},1331:function(t,e,n){"use strict";var r=n("5398"),i=n.n(r);i.a},"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1ed8":function(t,e,n){},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),i=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},2423:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"i",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"h",(function(){return m})),n.d(e,"b",(function(){return p}));var r=n("b775");function i(t){var e=t.channel_id,n=t.timestamp,i=t.with_top;return Object(r["a"])({url:"v1_1/articles",method:"GET",params:{channel_id:e,timestamp:n,with_top:i}})}function a(t){return Object(r["a"])({url:"v1_0/article/dislikes",method:"POST",data:{target:t}})}function s(t){return Object(r["a"])({url:"v1_0/user/blacklists",method:"POST",data:{target:t}})}function c(t){var e=t.art_id,n=t.type;return Object(r["a"])({url:"v1_0/article/reports",method:"POST",data:{target:e,type:n,remark:"谢谢举报"}})}function o(t){return Object(r["a"])({url:"v1_0/suggestion",method:"GET",params:{q:t}})}function u(t){var e=t.page,n=t.per_page,i=t.key;return Object(r["a"])({url:"v1_0/search",method:"GET",params:{page:e,per_page:n,q:i}})}function l(t){return Object(r["a"])({url:"v1_0/articles/".concat(t),method:"GET"})}function f(t){return Object(r["a"])({url:"v1_0/article/likings",method:"POST",data:{target:t}})}function d(t){return Object(r["a"])({url:"v1_0/article/likings/"+t,method:"DELETE"})}function m(t){return Object(r["a"])({url:"v1_0/article/dislikes",method:"POST",data:{target:t}})}function p(t){return Object(r["a"])({url:"v1_0/article/dislikes/"+t,method:"DELETE"})}},"362f":function(t,e,n){"use strict";var r=n("7f0c"),i=n.n(r);i.a},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(t){return i(r(t))}}))},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},5398:function(t,e,n){},"549b":function(t,e,n){"use strict";var r=n("d864"),i=n("63b6"),a=n("241e"),s=n("b0dc"),c=n("3702"),o=n("b447"),u=n("20fd"),l=n("7cd6");i(i.S+i.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,d=a(t),m="function"==typeof this?this:Array,p=arguments.length,h=p>1?arguments[1]:void 0,v=void 0!==h,b=0,O=l(d);if(v&&(h=r(h,p>2?arguments[2]:void 0,2)),void 0==O||m==Array&&c(O))for(e=o(d.length),n=new m(e);e>b;b++)u(n,b,v?h(d[b],b):d[b]);else for(f=O.call(d),n=new m;!(i=f.next()).done;b++)u(n,b,v?s(f,h,[i.value,b],!0):i.value);return n.length=b,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"5eda":function(t,e,n){var r=n("5ca1"),i=n("8378"),a=n("79e5");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*a((function(){n(1)})),"Object",s)}},6955:function(t,e,n){"use strict";var r=n("c6a2"),i=n.n(r);i.a},"706d":function(t,e,n){},"75fc":function(t,e,n){"use strict";var r=n("a745"),i=n.n(r);function a(t){if(i()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var s=n("774e"),c=n.n(s),o=n("c8bb"),u=n.n(o);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return a(t)||l(t)||f()}n.d(e,"a",(function(){return d}))},"774e":function(t,e,n){t.exports=n("d2d5")},"7f0c":function(t,e,n){},8248:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail_wrap"},[n("van-nav-bar",{attrs:{fixed:"",title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),n("van-cell",[n("template",{slot:"title"},[n("div",{staticClass:"detail_title"},[t._v(t._s(t.detailObj.title))])])],2),n("author",{attrs:{detailObj:t.detailObj}}),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.detail_list,callback:function(e){t.detail_list=e},expression:"detail_list"}},[n("div",{staticClass:"det",domProps:{innerHTML:t._s(t.detailObj.content)}})]),n("like",{attrs:{detailObj:t.detailObj}}),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(t,e){return n("div",{key:e},[n("comment",{attrs:{commentItem:t}})],1)})),0),n("writemsg",{attrs:{detailObj:t.detailObj},on:{fn:t.addComResult}}),n("van-popup",{style:{height:"60%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("comment",{attrs:{commentItem:t.currentCommentObj}})],1)],1)},i=[],a=n("75fc"),s=(n("96cf"),n("3b8d")),c=n("85f2"),o=n.n(c);function u(t,e,n){return e in t?o()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell",[n("template",{slot:"title"},[n("div",{staticClass:"title_wrap"},[n("div",{staticClass:"img_wrap"},[n("img",{attrs:{src:t.detailObj.aut_photo,alt:""}})]),n("van-cell",[n("template",{slot:"title"},[n("div",[t._v(t._s(t.detailObj.aut_name))])]),n("template",{slot:"label"},[n("div",[t._v(t._s(t._f("dateFormat")(t.detailObj.pubdate)))])])],2),n("div",{staticClass:"focus"},[t.detailObj.is_followed?t._e():n("van-button",{attrs:{type:"danger",size:"small"},on:{click:t.focus}},[t._v("关注")]),t.detailObj.is_followed?n("van-button",{attrs:{type:"default",size:"small"},on:{click:t.unfocusUser}},[t._v("取消关注")]):t._e()],1)],1)])],2)],1)},f=[],d=n("c24f"),m={props:["detailObj"],data:function(){return{}},methods:{focus:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d["a"])(this.detailObj.aut_id);case 3:t.sent,this.$toast.success("关注成功"),this.detailObj.is_followed=!0,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("关注失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),unfocusUser:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d["c"])(this.detailObj.aut_id);case 3:t.sent,this.$toast.success("取关成功"),this.detailObj.is_followed=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("取关失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()}},p=m,h=(n("6955"),n("2877")),v=Object(h["a"])(p,l,f,!1,null,null,null),b=v.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"twoBtn"},[1===t.detailObj.attitude?n("van-button",{attrs:{type:"default",icon:"star"},on:{click:t.dislike}},[t._v("取消点赞")]):n("van-button",{attrs:{type:"danger",icon:"star-o"},on:{click:t.like}},[t._v("点赞")]),0===t.detailObj.attitude?n("van-button",{attrs:{type:"default",icon:"like"},on:{click:t.dishate}},[t._v("取消不喜欢")]):n("van-button",{attrs:{type:"danger",icon:"like-o"},on:{click:t.hate}},[t._v("不喜欢")])],1)},_=[],j=n("2423"),g={props:["detailObj"],methods:{like:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(j["i"])(this.detailObj.art_id);case 3:t.sent,this.detailObj.attitude=1,this.$toast.success("点赞成功"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("点赞失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),dislike:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(j["c"])(this.detailObj.art_id);case 3:t.sent,this.detailObj.attitude=-1,this.$toast.success("取消点赞成功"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast.fail("取消点赞失败");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),hate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(j["h"])(this.detailObj.art_id);case 3:this.detailObj.attitude=0,this.$toast.success("不喜欢文章成功"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$toast.fail("不喜欢文章失败");case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),dishate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(j["b"])(this.detailObj.art_id);case 3:this.detailObj.attitude=-11,this.$toast.success("取消不喜欢文章成功"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$toast.fail("取消不喜欢文章失败");case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()}},w=g,y=(n("cf81"),Object(h["a"])(w,O,_,!1,null,null,null)),k=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell",[n("template",{slot:"title"},[n("div",{staticClass:"title_wrap"},[n("div",{staticClass:"img_wrap"},[n("img",{attrs:{src:t.commentItem.aut_photo,alt:""}})]),n("div",{staticClass:"msg"},[n("van-cell",[n("template",{slot:"title"},[t._v(t._s(t.commentItem.aut_name))])],2)],1),n("div",[n("van-icon",{attrs:{name:"good-job-o"}}),t._v("\n            "+t._s(t.commentItem.like_count)+"\n          ")],1)]),n("div",{staticClass:"mycontent"},[n("div",[t._v(t._s(t.commentItem.content))]),n("div",[t._v("\n            "+t._s(t._f("dateForm")(t.commentItem.pubdate))+"\n            "),n("span",{on:{click:t.reply}},[t._v("回复("+t._s(t.commentItem.reply_count)+")")])])])])],2)],1)},L=[],S=(n("8e6e"),n("ac6a"),n("456d"),n("2b0e")),C=new S["a"],T=n("b775");function P(t){var e=t.art_id,n=t.content,r=t.id;return Object(T["a"])({url:"v1_0/comments",method:"POST",data:{target:e,content:n,art_id:r||null}})}function R(t){var e=t.type,n=t.art_id,r=t.offset,i=t.limit;return Object(T["a"])({url:"v1_0/comments",method:"GET",params:{type:e,source:n,offset:r||null,limit:i||null}})}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={props:["commentItem"],data:function(){return{addCommentList:{}}},methods:{reply:function(){C.$emit("changeShow",$({show:!0},this.commentItem))}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(!0);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},D=A,I=(n("1331"),Object(h["a"])(D,x,L,!1,null,"a40a3398",null)),G=I.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"write-wrap"},[n("van-cell",{attrs:{fixed:""}},[n("template",{slot:"title"},[n("div",{staticClass:"write"},[n("div",{staticClass:"ipt"},[n("van-field",{attrs:{"left-icon":"edit",placeholder:"写评论"},model:{value:t.writemsg,callback:function(e){t.writemsg=e},expression:"writemsg"}})],1),n("div",{staticClass:"btn"},[n("van-button",{on:{click:t.sendComment}},[t._v("发送")])],1),n("div",{staticClass:"star"},[n("van-icon",{attrs:{name:"star-o"}})],1)])])],2)],1)},F=[],V={props:["detailObj"],data:function(){return{writemsg:"",addCommentObj:{}}},methods:{sendComment:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P({art_id:this.detailObj.art_id,content:this.writemsg});case 2:e=t.sent,console.log(e),this.addCommentObj=e,this.$emit("fn",e.new_obj),this.writemsg="";case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},H=V,N=(n("362f"),Object(h["a"])(H,M,F,!1,null,"801a9462",null)),q=N.exports,z={name:"detail",components:{author:b,like:k,comment:G,writemsg:q},data:function(){var t;return t={detail_list:!1,finished:!1,detailObj:{},commentList:[],show:!1,offset:0,limit:10,end_id:-1,loading:!1},u(t,"finished",!1),u(t,"currentCommentObj",{}),t},methods:{onLoad:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.detail_list=!1,this.offset!=this.end_id){t.next=5;break}return this.loading=!1,this.finished=!0,t.abrupt("return");case 5:if(0!==this.offset){t.next=14;break}return t.next=8,R({type:"a",art_id:this.detailObj.art_id,limit:this.limit});case 8:e=t.sent,this.commentList=e.results,this.offset=e.last_id,this.end_id=e.end_id,t.next=20;break;case 14:return t.next=16,R({type:"a",art_id:this.detailObj.art_id,offset:this.offset,limit:this.limit});case 16:n=t.sent,this.commentList=[].concat(Object(a["a"])(this.commentList),Object(a["a"])(n.results)),this.offset=n.last_id,this.end_id=n.end_id;case 20:this.loading=!1;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addComResult:function(t){this.commentList.unshift(t),this.commentList=Object(a["a"])(this.commentList)}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(j["f"])(this.$route.params.art_id);case 2:e=t.sent,console.log(e),this.detailObj=e,C.$on("changeShow",(function(t){n.show=t.show,n.currentCommentObj=t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},B=z,J=(n("ac62"),Object(h["a"])(B,r,i,!1,null,null,null));e["default"]=J.exports},"85f2":function(t,e,n){t.exports=n("454f")},"8e6e":function(t,e,n){var r=n("5ca1"),i=n("990b"),a=n("6821"),s=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),o=s.f,u=i(r),l={},f=0;while(u.length>f)n=o(r,e=u[f++]),void 0!==n&&c(l,e,n);return l}})},9003:function(t,e,n){var r=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},9093:function(t,e,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"95d5":function(t,e,n){var r=n("40c3"),i=n("5168")("iterator"),a=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(r(e))}},"990b":function(t,e,n){var r=n("9093"),i=n("2621"),a=n("cb7c"),s=n("7726").Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},a745:function(t,e,n){t.exports=n("f410")},ac62:function(t,e,n){"use strict";var r=n("706d"),i=n.n(r);i.a},ac6a:function(t,e,n){for(var r=n("cadf"),i=n("0d58"),a=n("2aba"),s=n("7726"),c=n("32e9"),o=n("84f2"),u=n("2b4c"),l=u("iterator"),f=u("toStringTag"),d=o.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(m),h=0;h<p.length;h++){var v,b=p[h],O=m[b],_=s[b],j=_&&_.prototype;if(j&&(j[l]||c(j,l,d),j[f]||c(j,f,b),o[b]=d,O))for(v in r)j[v]||a(j,v,r[v],!0)}},c24f:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return o}));var r=n("b775");function i(t){var e=t.mobile,n=t.code;return Object(r["a"])({url:"v1_0/authorizations",method:"POST",data:{mobile:e,code:n}})}function a(t){return Object(r["a"])({url:"v1_0/user/followings",method:"POST",data:{target:t}})}function s(t){return Object(r["a"])({url:"v1_0/user/followings/"+t,method:"DELETE"})}function c(){return Object(r["a"])({url:"v1_0/user/profile",method:"GET"})}function o(t){var e=new FormData;return e.append("photo",t),Object(r["a"])({url:"v1_0/user/photo",method:"PATCH",data:e})}},c6a2:function(t,e,n){},c8bb:function(t,e,n){t.exports=n("54a1")},cf81:function(t,e,n){"use strict";var r=n("1ed8"),i=n.n(r);i.a},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},f1ae:function(t,e,n){"use strict";var r=n("86cc"),i=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-e71876de.29aaffb5.js.map