(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3470c380"],{"0439":function(t,e,n){"use strict";var a=n("6732"),i=n.n(a);i.a},"1af6":function(t,e,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"20fd":function(t,e,n){"use strict";var a=n("d9f6"),i=n("aebd");t.exports=function(t,e,n){e in t?a.f(t,e,i(0,n)):t[e]=n}},2423:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"i",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"b",(function(){return p}));var a=n("b775");function i(t){var e=t.channel_id,n=t.timestamp,i=t.with_top;return Object(a["a"])({url:"v1_1/articles",method:"GET",params:{channel_id:e,timestamp:n,with_top:i}})}function r(t){return Object(a["a"])({url:"v1_0/article/dislikes",method:"POST",data:{target:t}})}function s(t){return Object(a["a"])({url:"v1_0/user/blacklists",method:"POST",data:{target:t}})}function c(t){var e=t.art_id,n=t.type;return Object(a["a"])({url:"v1_0/article/reports",method:"POST",data:{target:e,type:n,remark:"谢谢举报"}})}function o(t){return Object(a["a"])({url:"v1_0/suggestion",method:"GET",params:{q:t}})}function u(t){var e=t.page,n=t.per_page,i=t.key;return Object(a["a"])({url:"v1_0/search",method:"GET",params:{page:e,per_page:n,q:i}})}function l(t){return Object(a["a"])({url:"v1_0/articles/".concat(t),method:"GET"})}function h(t){return Object(a["a"])({url:"v1_0/article/likings",method:"POST",data:{target:t}})}function d(t){return Object(a["a"])({url:"v1_0/article/likings/"+t,method:"DELETE"})}function f(t){return Object(a["a"])({url:"v1_0/article/dislikes",method:"POST",data:{target:t}})}function p(t){return Object(a["a"])({url:"v1_0/article/dislikes/"+t,method:"DELETE"})}},"2fdb":function(t,e,n){"use strict";var a=n("5ca1"),i=n("d2c8"),r="includes";a(a.P+a.F*n("5147")(r),"String",{includes:function(t){return!!~i(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3fc4":function(t,e,n){"use strict";var a=n("e150"),i=n.n(a);i.a},5147:function(t,e,n){var a=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,!"/./"[t](e)}catch(i){}}return!0}},"549b":function(t,e,n){"use strict";var a=n("d864"),i=n("63b6"),r=n("241e"),s=n("b0dc"),c=n("3702"),o=n("b447"),u=n("20fd"),l=n("7cd6");i(i.S+i.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,h,d=r(t),f="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,b=0,g=l(d);if(m&&(v=a(v,p>2?arguments[2]:void 0,2)),void 0==g||f==Array&&c(g))for(e=o(d.length),n=new f(e);e>b;b++)u(n,b,m?v(d[b],b):d[b]);else for(h=g.call(d),n=new f;!(i=h.next()).done;b++)u(n,b,m?s(h,v,[i.value,b],!0):i.value);return n.length=b,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},6732:function(t,e,n){},6762:function(t,e,n){"use strict";var a=n("5ca1"),i=n("c366")(!0);a(a.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"75fc":function(t,e,n){"use strict";var a=n("a745"),i=n.n(a);function r(t){if(i()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var s=n("774e"),c=n.n(s),o=n("c8bb"),u=n.n(o);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return r(t)||l(t)||h()}n.d(e,"a",(function(){return d}))},"774e":function(t,e,n){t.exports=n("d2d5")},"7abe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-wrap"},[n("van-nav-bar",{attrs:{title:"首页"}}),n("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("div",{staticClass:"myIcon",attrs:{slot:"nav-right"},slot:"nav-right"},[n("van-icon",{attrs:{name:"wap-nav"},on:{click:t.showup}})],1),t._l(t.channelList,(function(e){return n("van-tab",{key:e.id,attrs:{title:e.name}},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:e.downloading,callback:function(n){t.$set(e,"downloading",n)},expression:"item.downloading"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:e.uploading,callback:function(n){t.$set(e,"uploading",n)},expression:"item.uploading"}},t._l(e.article,(function(e,a){return n("van-cell",{key:a,staticClass:"titleList",attrs:{title:e.title}},[n("template",{slot:"label"},[n("van-grid",{attrs:{border:!1,"column-num":3}},t._l(e.cover.images,(function(t,e){return n("van-grid-item",{key:e},[n("van-image",{attrs:{"lazy-load":"",src:t}})],1)})),1),n("div",{staticClass:"message"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(e.aut_name))]),n("span",[t._v(" 评论 "+t._s(e.comm_count))]),n("span",[t._v(" "+t._s(t._f("dateFormat")(e.subdate)))])]),n("div",{staticClass:"right"},[n("van-icon",{attrs:{name:"close"},on:{click:function(n){return t.showMore(e.art_id,e.aut_id)}}})],1)])],1)],2)})),1)],1)],1)}))],2),n("channel",{attrs:{mychannelList:t.channelList,channelActive:t.active},on:{"update:channelActive":function(e){t.active=e},"update:channel-active":function(e){t.active=e}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),n("more",{attrs:{art_id:t.art_id,aut_id:t.aut_id},on:{getAriId:t.delArticle,delAuthor:t.delAuthor},model:{value:t.showmore,callback:function(e){t.showmore=e},expression:"showmore"}})],1)},i=[],r=n("75fc"),s=(n("96cf"),n("3b8d")),c=(n("ac6a"),n("b775"));function o(){return Object(c["a"])({url:"v1_0/user/channels",method:"GET"})}function u(){return Object(c["a"])({url:"v1_0/channels",method:"GET"})}function l(t){var e=t.channels;return Object(c["a"])({url:"v1_0/user/channels",method:"PUT",data:{channels:e}})}n("55c8");var h=n("2423"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-popup",{style:{height:"90%"},attrs:{position:"bottom",value:t.value},on:{input:function(e){return t.$emit("input",e)}}},[n("div",{staticClass:"mybox"},[n("div",{staticClass:"channel_top"},[n("div",{staticClass:"mychannel"},[t._v("\n          我的频道\n          "),n("span",[t._v("点击进入频道")])]),n("div",{staticClass:"edit_btn"},[t.clearBtn?n("input",{attrs:{type:"button",value:"完成"},on:{click:t.channel_finish}}):n("input",{attrs:{type:"button",value:"编辑"},on:{click:t.channel_edit}})])]),n("van-grid",{attrs:{clickable:!0}},t._l(t.mychannelList,(function(e,a){return n("van-grid-item",{key:e.id,on:{click:function(e){return t.$emit("update:channelActive",a)}}},[n("div",{staticClass:"channel_text",attrs:{slot:"text"},slot:"text"},[n("div",{class:{active:t.channelActive===a}},[t._v(t._s(e.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.clearBtn,expression:"clearBtn"}],staticClass:"clear_icon",attrs:{name:"clear"},on:{click:function(e){return t.delChannel(a)}}})],1)])})),1)],1),n("div",{staticClass:"mybox"},[n("div",{staticClass:"channel_top"},[n("div",{staticClass:"mychannel"},[t._v("\n          频道推荐\n          "),n("span",[t._v("点击进入频道")])])]),n("van-grid",t._l(t.computechannel,(function(e){return n("van-grid-item",{key:e.id},[n("div",{staticClass:"channel_text",attrs:{slot:"text"},on:{click:function(n){return t.tomychannel(e)}},slot:"text"},[n("div",[t._v(t._s(e.name))])])])})),1)],1)])],1)},f=[],p=(n("6762"),n("2fdb"),{props:["value","mychannelList","channelActive"],data:function(){return{clearBtn:!1,allChannelList:[]}},methods:{delChannel:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.mychannelList.splice(e,1),!this.$store.state.use){t.next=7;break}return n=this.mychannelList.slice(1).map((function(t,e){return{id:t.id,seq:e+2}})),t.next=5,l({channels:n});case 5:t.next=8;break;case 7:window.localStorage.setItem("channel",JSON.stringify(this.mychannelList));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),channel_edit:function(){this.clearBtn=!0},channel_finish:function(){this.clearBtn=!1},tomychannel:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.mychannelList.push(e),n=this.$store.state.use,n&&n.token){t.next=6;break}window.localStorage.setItem("channel",JSON.stringify(this.mychannelList)),t.next=9;break;case 6:return a=this.mychannelList.slice(1).map((function(t,e){return{id:t.id,seq:e+2}})),t.next=9,l({channels:a});case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:e=t.sent,console.log(e),this.allChannelList=e.channels,this.allChannelList.forEach((function(t){n.$set(t,"article",[]),n.$set(t,"uploading",!1),n.$set(t,"downloading",!1),n.$set(t,"finished",!1),n.$set(t,"pre_timestamp",0)}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{computechannel:function(){var t=this.mychannelList.map((function(t){return t.id})),e=this.allChannelList.filter((function(e){return!t.includes(e.id)}));return e}}}),v=p,m=(n("0439"),n("2877")),b=Object(m["a"])(v,d,f,!1,null,"81552be2",null),g=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-dialog",{attrs:{value:t.value,showConfirmButton:!1,closeOnClickOverlay:""},on:{input:function(e){return t.$emit("input",e)}}},[n("van-cell-group",[n("van-cell",{attrs:{title:"隐藏此信息",icon:"location-o"},on:{click:function(e){return t.hidden(t.art_id)}}}),n("van-cell",{attrs:{title:"举报",icon:"location-o","is-link":""},on:{click:t.showReport}}),n("van-cell",{attrs:{title:"拉黑",icon:"location-o"},on:{click:t.blacklist}})],1)],1),n("van-dialog",{attrs:{value:t.isReport,showConfirmButton:!1,closeOnClickOverlay:""}},[n("van-cell-group",[n("van-cell",{attrs:{"is-link":"","arrow-direction":"left"},on:{click:function(e){t.isReport=!1}}}),t._l(t.reportList,(function(e,a){return n("van-cell",{key:a,attrs:{title:e.name},on:{click:function(n){return t.reportListItem(e.value)}}})}))],2)],1)],1)},w=[],y={props:["value","art_id","aut_id"],data:function(){return{isReport:!1,reportList:[{value:0,name:"其他问题"},{value:1,name:"标题夸张"},{value:2,name:"低俗色情"},{value:3,name:"错别字多"},{value:4,name:"旧闻重复"},{value:5,name:"广告软文"},{value:6,name:"内容不实"},{value:7,name:"涉嫌违法犯罪"},{value:8,name:"侵权"}]}},methods:{reportListItem:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h["j"])({art_id:this.art_id,type:e});case 3:n=t.sent,this.$toast.success("举报成功"),console.log(111),console.log(n),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),409==t.t0.response.status?this.$toast.fail("该用户已被举报"):this.$toast.fail("举报失败");case 12:return t.prev=12,this.isReport=!1,this.$emit("input",!1),t.finish(12);case 16:case"end":return t.stop()}}),t,this,[[0,9,12,16]])})));function e(e){return t.apply(this,arguments)}return e}(),showReport:function(){this.isReport=!0},hidden:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h["d"])(e);case 3:n=t.sent,console.log(n),this.$toast.success("取关成功"),this.$emit("getAriId",e),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$toast.fail("取关失败");case 12:return t.prev=12,this.$emit("input",!1),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[0,9,12,15]])})));function e(e){return t.apply(this,arguments)}return e}(),blacklist:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h["a"])(this.aut_id);case 3:this.$toast.success("拉黑成功"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),this.$toast.fail("拉黑失败");case 9:return t.prev=9,this.$emit("input",!1),t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[0,6,9,12]])})));function e(){return t.apply(this,arguments)}return e}()}},x=y,k=Object(m["a"])(x,_,w,!1,null,null,null),L=k.exports,O={name:"home",components:{channel:g,more:L},data:function(){return{active:0,uploading:!1,finished:!1,list:[],downloading:!1,show:!1,channelList:[],showmore:!1,art_id:0,aut_id:0}},methods:{showMore:function(t,e){this.showmore=!0,this.art_id=t,this.aut_id=e},delAuthor:function(t){},delArticle:function(t){var e=this.channelList[this.active].article;e.forEach((function(n,a){n.art_id!==t||e.splice(a,1)}))},onLoad:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.channelList[this.active],null!==e.pre_timestamp){t.next=5;break}return e.finished=!0,e.uploading=!1,t.abrupt("return");case 5:if(0!==e.pre_timestamp){t.next=16;break}return t.next=8,Object(h["e"])({channel_id:e.id,timestamp:Date.now(),with_top:1});case 8:n=t.sent,e.article=n.results,this.channelList=Object(r["a"])(this.channelList),e.pre_timestamp=n.pre_timestamp,e.downloading=!1,console.log(this.channelList),t.next=23;break;case 16:return t.next=18,Object(h["e"])({channel_id:e.id,timestamp:e.pre_timestamp,with_top:1});case 18:a=t.sent,e.article=[].concat(Object(r["a"])(e.article),Object(r["a"])(a.results)),this.channelList=Object(r["a"])(this.channelList),e.pre_timestamp=a.pre_timestamp,e.downloading=!1;case 23:e.uploading=!1;case 24:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onRefresh:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.channelList[this.active],e.article=[],e.uploading=!1,e.downloading=!1,e.finished=!1,e.pre_timestamp=0,t.next=8,Object(h["e"])({channel_id:e.id,timestamp:Date.now(),with_top:1});case 8:n=t.sent,e.article=n.results,e.pre_timestamp=n.pre_timestamp,e.downloading=!1,this.channelList=Object(r["a"])(this.channelList);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showup:function(){this.show=!0},getChannelList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$store.state.use,!e){t.next=8;break}return t.next=4,o();case 4:n=t.sent,this.channelList=n.channels,t.next=17;break;case 8:if(a=JSON.parse(window.localStorage.getItem("channel")),!a){t.next=13;break}this.channelList=a,t.next=17;break;case 13:return t.next=15,o();case 15:i=t.sent,this.channelList=i.channels;case 17:this.setChannelItem();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setChannelItem:function(){var t=this;this.channelList.forEach((function(e){t.$set(e,"article",[]),t.$set(e,"uploading",!1),t.$set(e,"downloading",!1),t.$set(e,"finished",!1),t.$set(e,"pre_timestamp",0)}))}},mounted:function(){this.getChannelList()}},j=O,S=(n("3fc4"),Object(m["a"])(j,a,i,!1,null,"1e416c10",null));e["default"]=S.exports},9003:function(t,e,n){var a=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"95d5":function(t,e,n){var a=n("40c3"),i=n("5168")("iterator"),r=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||r.hasOwnProperty(a(e))}},a745:function(t,e,n){t.exports=n("f410")},aae3:function(t,e,n){var a=n("d3f4"),i=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},ac6a:function(t,e,n){for(var a=n("cadf"),i=n("0d58"),r=n("2aba"),s=n("7726"),c=n("32e9"),o=n("84f2"),u=n("2b4c"),l=u("iterator"),h=u("toStringTag"),d=o.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(f),v=0;v<p.length;v++){var m,b=p[v],g=f[b],_=s[b],w=_&&_.prototype;if(w&&(w[l]||c(w,l,d),w[h]||c(w,h,b),o[b]=d,g))for(m in a)w[m]||r(w,m,a[m],!0)}},c8bb:function(t,e,n){t.exports=n("54a1")},d2c8:function(t,e,n){var a=n("aae3"),i=n("be13");t.exports=function(t,e,n){if(a(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},e150:function(t,e,n){},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-3470c380.394bdf93.js.map