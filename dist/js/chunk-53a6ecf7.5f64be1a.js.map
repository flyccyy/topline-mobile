{"version":3,"sources":["webpack:///./src/views/login/index.vue?9e36","webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?5b56","webpack:///./src/views/login/index.vue","webpack:///./src/api/user.js","webpack:///./src/views/login/index.vue?8b2c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","expression","errors","first","model","callback","$$v","mobile","code","isLoading","on","login","_v","staticRenderFns","data","methods","setMyRule","custom","required","$validator","localize","dict","validate","then","mounted","component","userLogin","request","url","method","focusUser","aut_id","target","unfocusUser","getUserProfile","userPhoto","photo","fd","FormData","append"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,QAAQH,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACI,WAAW,CAAC,CAACC,KAAK,WAAWC,QAAQ,aAAaC,MAAM,WAAaC,WAAW,eAAeL,MAAM,CAAC,KAAO,SAAS,UAAY,GAAG,MAAQ,MAAM,YAAc,SAAS,gBAAgBP,EAAIa,OAAOC,MAAM,WAAWC,MAAM,CAACJ,MAAOX,EAAU,OAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,OAAOD,GAAKL,WAAW,YAAYR,EAAG,YAAY,CAACI,WAAW,CAAC,CAACC,KAAK,WAAWC,QAAQ,aAAaC,MAAM,WAAaC,WAAW,eAAeL,MAAM,CAAC,MAAQ,MAAM,YAAc,SAAS,KAAO,OAAO,gBAAgBP,EAAIa,OAAOC,MAAM,SAASC,MAAM,CAACJ,MAAOX,EAAQ,KAAEgB,SAAS,SAAUC,GAAMjB,EAAImB,KAAKF,GAAKL,WAAW,WAAW,GAAGR,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQ,QAAUP,EAAIoB,UAAU,eAAe,UAAUC,GAAG,CAAC,MAAQrB,EAAIsB,QAAQ,CAACtB,EAAIuB,GAAG,SAAS,IAAI,IACj+BC,EAAkB,G,oCC+BtB,G,UAAA,CACEC,KADF,WAEI,MAAO,CACLP,OAAQ,cACRC,KAAM,SACNC,WAAN,IAGEM,QAAS,CAEPC,UAFJ,WAGM,IAAN,GACQC,OAAQ,CACNV,OAAQ,CACNW,SAAU,UAEZV,KAAM,CACJU,SAAU,YAIhB5B,KAAK6B,WAAWC,SAAS,QAASC,IAEpCV,MAfJ,WAeA,WACMrB,KAAK6B,WAAWG,WAAWC,KAA3B,WAAN,sJACA,EADA,gBAEA,oBAFA,8BAIA,eAJA,kBAMA,gBACA,gBACA,cARA,OAMA,EANA,OAUA,6BACA,eACA,wBACA,eAbA,qDAgBA,sBACA,eACA,kBAlBA,6GAAM,MAwBJC,QAhDF,WAiDIlC,KAAK0B,eCjFqV,I,wBCQ1VS,EAAY,eACd,EACArC,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAY,E,2CCnBf,0LAIA,SAASC,EAAT,GAAiC,IAAbnB,EAAa,EAAbA,OAAOC,EAAM,EAANA,KACvB,OAAOmB,eAAQ,CACXC,IAAK,sBACLC,OAAQ,OACRf,KAAM,CACJP,SACAC,UAMV,SAASsB,EAAUC,GACf,OAAOJ,eAAQ,CACXC,IAAI,uBACJC,OAAO,OACPf,KAAK,CACDkB,OAAOD,KAMnB,SAASE,EAAYF,GACjB,OAAOJ,eAAQ,CACXC,IAAI,wBAAwBG,EAC5BF,OAAO,WAKf,SAASK,IACL,OAAOP,eAAQ,CACXC,IAAI,oBACJC,OAAO,QAKf,SAASM,EAAUC,GACf,IAAIC,EAAK,IAAIC,SAEb,OADAD,EAAGE,OAAO,QAAQH,GACXT,eAAQ,CACXC,IAAI,kBACJC,OAAO,QACPf,KAAKuB,M,yDCjDb,yBAAwjB,EAAG","file":"js/chunk-53a6ecf7.5f64be1a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-wrap\"},[_c('van-nav-bar',{attrs:{\"title\":\"登录\"}}),_c('van-cell-group',[_c('van-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],attrs:{\"name\":\"mobile\",\"clearable\":\"\",\"label\":\"手机号\",\"placeholder\":\"请输入手机号\",\"error-message\":_vm.errors.first('mobile')},model:{value:(_vm.mobile),callback:function ($$v) {_vm.mobile=$$v},expression:\"mobile\"}}),_c('van-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],attrs:{\"label\":\"验证码\",\"placeholder\":\"请输入验证码\",\"name\":\"code\",\"error-message\":_vm.errors.first('code')},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1),_c('div',{staticClass:\"login-btn\"},[_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"large\",\"loading\":_vm.isLoading,\"loading-text\":\"...登录中\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login-wrap\">\r\n    <van-nav-bar title=\"登录\" />\r\n    <van-cell-group>\r\n      <van-field\r\n        v-model=\"mobile\"\r\n        v-validate=\"'required'\"\r\n        name=\"mobile\"\r\n        clearable\r\n        label=\"手机号\"\r\n        placeholder=\"请输入手机号\"\r\n        :error-message=\"errors.first('mobile')\"\r\n      />\r\n      <van-field\r\n        v-model=\"code\"\r\n        label=\"验证码\"\r\n        placeholder=\"请输入验证码\"\r\n        name=\"code\"\r\n        v-validate=\"'required'\"\r\n        :error-message=\"errors.first('code')\"\r\n      />\r\n    </van-cell-group>\r\n    <div class=\"login-btn\">\r\n      <van-button type=\"info\" size=\"large\" @click=\"login\" :loading=\"isLoading\" loading-text=\"...登录中\">登录</van-button>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { userLogin } from \"@/api/user\";\r\nimport { setAuthor } from \"@/utils/author\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      mobile: \"18888888888\",\r\n      code: \"246810\",\r\n      isLoading:false,\r\n    };\r\n  },\r\n  methods: {\r\n    //设置自己的验证规则,自定义验证提示\r\n    setMyRule() {\r\n      const dict = {\r\n        custom: {\r\n          mobile: {\r\n            required: \"请输入手机号\"\r\n          },\r\n          code: {\r\n            required: \"请输入验证码\"\r\n          }\r\n        }\r\n      };\r\n      this.$validator.localize(\"zh_CN\", dict);\r\n    },\r\n    login() {\r\n      this.$validator.validate().then(async valid => {\r\n        if (!valid) {\r\n          console.log(\"验证失败\");\r\n        } else {\r\n          this.isLoading=true;\r\n          try {\r\n            let res = await userLogin({\r\n              mobile: this.mobile,\r\n              code: this.code\r\n            });\r\n            this.$store.commit(\"setUser\", res);\r\n            this.isLoading = false;\r\n            this.$router.back(\"/home\");\r\n            console.log(res);\r\n          } catch (err) {\r\n            //发送请求失败，即登录失败时提示\r\n            this.$toast.fail('登录失败');\r\n            this.isLoading = false;\r\n            console.log(\"出错\");\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setMyRule();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n//把样式写在了app.vue\r\n.login-wrap{\r\n  padding-top: 46px;\r\n}\r\n.login-btn {\r\n  margin: 10px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=01d63b66&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=01d63b66&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01d63b66\",\n  null\n  \n)\n\nexport default component.exports","//封装所有用户相关的网络请求\r\nimport request from '@/utils/request.js'\r\n\r\n//添加方法：专门用于用户登录\r\nfunction userLogin({mobile,code}){\r\n    return request({\r\n        url: \"v1_0/authorizations\",\r\n        method: \"POST\",\r\n        data: {\r\n          mobile,\r\n          code\r\n        }\r\n    })\r\n}\r\n\r\n//关注用户\r\nfunction focusUser(aut_id){\r\n    return request({\r\n        url:'v1_0/user/followings',\r\n        method:'POST',\r\n        data:{\r\n            target:aut_id\r\n        }\r\n    })\r\n}\r\n\r\n//取消关注用户\r\nfunction unfocusUser(aut_id){\r\n    return request({\r\n        url:'v1_0/user/followings/'+aut_id,\r\n        method:'DELETE'\r\n    })\r\n}\r\n\r\n//获取个人资料\r\nfunction getUserProfile(){\r\n    return request({\r\n        url:'v1_0/user/profile',\r\n        method:'GET'\r\n    })\r\n}\r\n\r\n//用户头像编辑\r\nfunction userPhoto(photo){\r\n    let fd = new FormData();\r\n    fd.append('photo',photo)\r\n    return request({\r\n        url:'v1_0/user/photo',\r\n        method:'PATCH',\r\n        data:fd\r\n    })\r\n}\r\nexport {\r\n    userLogin,focusUser,unfocusUser,getUserProfile,userPhoto\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=01d63b66&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=01d63b66&lang=less&scoped=true&\""],"sourceRoot":""}